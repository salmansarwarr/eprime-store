{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _classCallCheck = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _inherits = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BulkWriteOperation = void 0;\nvar operation_1 = require(\"./operation\");\n/** @internal */\nvar BulkWriteOperation = /*#__PURE__*/function (_operation_1$Abstract) {\n  _inherits(BulkWriteOperation, _operation_1$Abstract);\n  var _super = _createSuper(BulkWriteOperation);\n  function BulkWriteOperation(collection, operations, options) {\n    var _this;\n    _classCallCheck(this, BulkWriteOperation);\n    _this = _super.call(this, options);\n    _this.options = options;\n    _this.collection = collection;\n    _this.operations = operations;\n    return _this;\n  }\n  _createClass(BulkWriteOperation, [{\n    key: \"executeCallback\",\n    value: function executeCallback(server, session, callback) {\n      var coll = this.collection;\n      var operations = this.operations;\n      var options = _objectSpread(_objectSpread(_objectSpread({}, this.options), this.bsonOptions), {}, {\n        readPreference: this.readPreference\n      });\n      // Create the bulk operation\n      var bulk = options.ordered === false ? coll.initializeUnorderedBulkOp(options) : coll.initializeOrderedBulkOp(options);\n      // for each op go through and add to the bulk\n      try {\n        for (var i = 0; i < operations.length; i++) {\n          bulk.raw(operations[i]);\n        }\n      } catch (err) {\n        return callback(err);\n      }\n      // Execute the bulk\n      bulk.execute(_objectSpread(_objectSpread({}, options), {}, {\n        session: session\n      })).then(function (result) {\n        return callback(undefined, result);\n      }, function (error) {\n        return callback(error);\n      });\n    }\n  }]);\n  return BulkWriteOperation;\n}(operation_1.AbstractCallbackOperation);\nexports.BulkWriteOperation = BulkWriteOperation;\n(0, operation_1.defineAspects)(BulkWriteOperation, [operation_1.Aspect.WRITE_OPERATION]);","map":{"version":3,"names":["operation_1","require","BulkWriteOperation","_operation_1$Abstract","_inherits","_super","_createSuper","collection","operations","options","_this","_classCallCheck","call","_createClass","key","value","executeCallback","server","session","callback","coll","_objectSpread","bsonOptions","readPreference","bulk","ordered","initializeUnorderedBulkOp","initializeOrderedBulkOp","i","length","raw","err","execute","then","result","undefined","error","AbstractCallbackOperation","exports","defineAspects","Aspect","WRITE_OPERATION"],"sources":["/home/salman/Documents/GitHub/FakeShop/node_modules/mongodb/src/operations/bulk_write.ts"],"sourcesContent":["import type {\n  AnyBulkWriteOperation,\n  BulkOperationBase,\n  BulkWriteOptions,\n  BulkWriteResult\n} from '../bulk/common';\nimport type { Collection } from '../collection';\nimport type { Server } from '../sdam/server';\nimport type { ClientSession } from '../sessions';\nimport type { Callback } from '../utils';\nimport { AbstractCallbackOperation, Aspect, defineAspects } from './operation';\n\n/** @internal */\nexport class BulkWriteOperation extends AbstractCallbackOperation<BulkWriteResult> {\n  override options: BulkWriteOptions;\n  collection: Collection;\n  operations: AnyBulkWriteOperation[];\n\n  constructor(\n    collection: Collection,\n    operations: AnyBulkWriteOperation[],\n    options: BulkWriteOptions\n  ) {\n    super(options);\n    this.options = options;\n    this.collection = collection;\n    this.operations = operations;\n  }\n\n  override executeCallback(\n    server: Server,\n    session: ClientSession | undefined,\n    callback: Callback<BulkWriteResult>\n  ): void {\n    const coll = this.collection;\n    const operations = this.operations;\n    const options = { ...this.options, ...this.bsonOptions, readPreference: this.readPreference };\n\n    // Create the bulk operation\n    const bulk: BulkOperationBase =\n      options.ordered === false\n        ? coll.initializeUnorderedBulkOp(options)\n        : coll.initializeOrderedBulkOp(options);\n\n    // for each op go through and add to the bulk\n    try {\n      for (let i = 0; i < operations.length; i++) {\n        bulk.raw(operations[i]);\n      }\n    } catch (err) {\n      return callback(err);\n    }\n\n    // Execute the bulk\n    bulk.execute({ ...options, session }).then(\n      result => callback(undefined, result),\n      error => callback(error)\n    );\n  }\n}\n\ndefineAspects(BulkWriteOperation, [Aspect.WRITE_OPERATION]);\n"],"mappings":";;;;;;;;;;;AAUA,IAAAA,WAAA,GAAAC,OAAA;AAEA;AAAA,IACaC,kBAAmB,0BAAAC,qBAAA;EAAAC,SAAA,CAAAF,kBAAA,EAAAC,qBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,kBAAA;EAK9B,SAAAA,mBACEK,UAAsB,EACtBC,UAAmC,EACnCC,OAAyB;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAT,kBAAA;IAEzBQ,KAAA,GAAAL,MAAA,CAAAO,IAAA,OAAMH,OAAO;IACbC,KAAA,CAAKD,OAAO,GAAGA,OAAO;IACtBC,KAAA,CAAKH,UAAU,GAAGA,UAAU;IAC5BG,KAAA,CAAKF,UAAU,GAAGA,UAAU;IAAC,OAAAE,KAAA;EAC/B;EAACG,YAAA,CAAAX,kBAAA;IAAAY,GAAA;IAAAC,KAAA,EAEQ,SAAAC,gBACPC,MAAc,EACdC,OAAkC,EAClCC,QAAmC;MAEnC,IAAMC,IAAI,GAAG,IAAI,CAACb,UAAU;MAC5B,IAAMC,UAAU,GAAG,IAAI,CAACA,UAAU;MAClC,IAAMC,OAAO,GAAAY,aAAA,CAAAA,aAAA,CAAAA,aAAA,KAAQ,IAAI,CAACZ,OAAO,GAAK,IAAI,CAACa,WAAW;QAAEC,cAAc,EAAE,IAAI,CAACA;MAAc,EAAE;MAE7F;MACA,IAAMC,IAAI,GACRf,OAAO,CAACgB,OAAO,KAAK,KAAK,GACrBL,IAAI,CAACM,yBAAyB,CAACjB,OAAO,CAAC,GACvCW,IAAI,CAACO,uBAAuB,CAAClB,OAAO,CAAC;MAE3C;MACA,IAAI;QACF,KAAK,IAAImB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpB,UAAU,CAACqB,MAAM,EAAED,CAAC,EAAE,EAAE;UAC1CJ,IAAI,CAACM,GAAG,CAACtB,UAAU,CAACoB,CAAC,CAAC,CAAC;;OAE1B,CAAC,OAAOG,GAAG,EAAE;QACZ,OAAOZ,QAAQ,CAACY,GAAG,CAAC;;MAGtB;MACAP,IAAI,CAACQ,OAAO,CAAAX,aAAA,CAAAA,aAAA,KAAMZ,OAAO;QAAES,OAAO,EAAPA;MAAO,EAAE,CAAC,CAACe,IAAI,CACxC,UAAAC,MAAM;QAAA,OAAIf,QAAQ,CAACgB,SAAS,EAAED,MAAM,CAAC;MAAA,GACrC,UAAAE,KAAK;QAAA,OAAIjB,QAAQ,CAACiB,KAAK,CAAC;MAAA,EACzB;IACH;EAAC;EAAA,OAAAlC,kBAAA;AAAA,EA7CqCF,WAAA,CAAAqC,yBAA0C;AAAlFC,OAAA,CAAApC,kBAAA,GAAAA,kBAAA;AAgDA,IAAAF,WAAA,CAAAuC,aAAa,EAACrC,kBAAkB,EAAE,CAACF,WAAA,CAAAwC,MAAM,CAACC,eAAe,CAAC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}