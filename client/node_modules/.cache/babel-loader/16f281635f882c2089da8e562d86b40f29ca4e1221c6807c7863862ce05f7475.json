{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _objectSpread = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _classCallCheck = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _inherits = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CollectionsOperation = void 0;\nvar collection_1 = require(\"../collection\");\nvar operation_1 = require(\"./operation\");\n/** @internal */\nvar CollectionsOperation = /*#__PURE__*/function (_operation_1$Abstract) {\n  _inherits(CollectionsOperation, _operation_1$Abstract);\n  var _super = _createSuper(CollectionsOperation);\n  function CollectionsOperation(db, options) {\n    var _this;\n    _classCallCheck(this, CollectionsOperation);\n    _this = _super.call(this, options);\n    _this.options = options;\n    _this.db = db;\n    return _this;\n  }\n  _createClass(CollectionsOperation, [{\n    key: \"executeCallback\",\n    value: function executeCallback(server, session, callback) {\n      var _this2 = this;\n      // Let's get the collection names\n      this.db.listCollections({}, _objectSpread(_objectSpread({}, this.options), {}, {\n        nameOnly: true,\n        readPreference: this.readPreference,\n        session: session\n      })).toArray().then(function (documents) {\n        var collections = [];\n        var _iterator = _createForOfIteratorHelper(documents),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var name = _step.value.name;\n            if (!name.includes('$')) {\n              // Filter collections removing any illegal ones\n              collections.push(new collection_1.Collection(_this2.db, name, _this2.db.s.options));\n            }\n          }\n          // Return the collection objects\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        callback(undefined, collections);\n      }, function (error) {\n        return callback(error);\n      });\n    }\n  }]);\n  return CollectionsOperation;\n}(operation_1.AbstractCallbackOperation);\nexports.CollectionsOperation = CollectionsOperation;","map":{"version":3,"names":["collection_1","require","operation_1","CollectionsOperation","_operation_1$Abstract","_inherits","_super","_createSuper","db","options","_this","_classCallCheck","call","_createClass","key","value","executeCallback","server","session","callback","_this2","listCollections","_objectSpread","nameOnly","readPreference","toArray","then","documents","collections","_iterator","_createForOfIteratorHelper","_step","s","n","done","name","includes","push","Collection","err","e","f","undefined","error","AbstractCallbackOperation","exports"],"sources":["/home/salman/Documents/GitHub/FakeShop/node_modules/mongodb/src/operations/collections.ts"],"sourcesContent":["import { Collection } from '../collection';\nimport type { Db } from '../db';\nimport type { Server } from '../sdam/server';\nimport type { ClientSession } from '../sessions';\nimport type { Callback } from '../utils';\nimport { AbstractCallbackOperation, type OperationOptions } from './operation';\n\nexport interface CollectionsOptions extends OperationOptions {\n  nameOnly?: boolean;\n}\n\n/** @internal */\nexport class CollectionsOperation extends AbstractCallbackOperation<Collection[]> {\n  override options: CollectionsOptions;\n  db: Db;\n\n  constructor(db: Db, options: CollectionsOptions) {\n    super(options);\n    this.options = options;\n    this.db = db;\n  }\n\n  override executeCallback(\n    server: Server,\n    session: ClientSession | undefined,\n    callback: Callback<Collection[]>\n  ): void {\n    // Let's get the collection names\n    this.db\n      .listCollections(\n        {},\n        { ...this.options, nameOnly: true, readPreference: this.readPreference, session }\n      )\n      .toArray()\n      .then(\n        documents => {\n          const collections = [];\n          for (const { name } of documents) {\n            if (!name.includes('$')) {\n              // Filter collections removing any illegal ones\n              collections.push(new Collection(this.db, name, this.db.s.options));\n            }\n          }\n          // Return the collection objects\n          callback(undefined, collections);\n        },\n        error => callback(error)\n      );\n  }\n}\n"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAKA,IAAAC,WAAA,GAAAD,OAAA;AAMA;AAAA,IACaE,oBAAqB,0BAAAC,qBAAA;EAAAC,SAAA,CAAAF,oBAAA,EAAAC,qBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,oBAAA;EAIhC,SAAAA,qBAAYK,EAAM,EAAEC,OAA2B;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAR,oBAAA;IAC7CO,KAAA,GAAAJ,MAAA,CAAAM,IAAA,OAAMH,OAAO;IACbC,KAAA,CAAKD,OAAO,GAAGA,OAAO;IACtBC,KAAA,CAAKF,EAAE,GAAGA,EAAE;IAAC,OAAAE,KAAA;EACf;EAACG,YAAA,CAAAV,oBAAA;IAAAW,GAAA;IAAAC,KAAA,EAEQ,SAAAC,gBACPC,MAAc,EACdC,OAAkC,EAClCC,QAAgC;MAAA,IAAAC,MAAA;MAEhC;MACA,IAAI,CAACZ,EAAE,CACJa,eAAe,CACd,EAAE,EAAAC,aAAA,CAAAA,aAAA,KACG,IAAI,CAACb,OAAO;QAAEc,QAAQ,EAAE,IAAI;QAAEC,cAAc,EAAE,IAAI,CAACA,cAAc;QAAEN,OAAO,EAAPA;MAAO,EAAE,CAClF,CACAO,OAAO,EAAE,CACTC,IAAI,CACH,UAAAC,SAAS,EAAG;QACV,IAAMC,WAAW,GAAG,EAAE;QAAC,IAAAC,SAAA,GAAAC,0BAAA,CACAH,SAAS;UAAAI,KAAA;QAAA;UAAhC,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAAkC;YAAA,IAArBC,IAAI,GAAAJ,KAAA,CAAAhB,KAAA,CAAJoB,IAAI;YACf,IAAI,CAACA,IAAI,CAACC,QAAQ,CAAC,GAAG,CAAC,EAAE;cACvB;cACAR,WAAW,CAACS,IAAI,CAAC,IAAIrC,YAAA,CAAAsC,UAAU,CAAClB,MAAI,CAACZ,EAAE,EAAE2B,IAAI,EAAEf,MAAI,CAACZ,EAAE,CAACwB,CAAC,CAACvB,OAAO,CAAC,CAAC;;;UAGtE;QAAA,SAAA8B,GAAA;UAAAV,SAAA,CAAAW,CAAA,CAAAD,GAAA;QAAA;UAAAV,SAAA,CAAAY,CAAA;QAAA;QACAtB,QAAQ,CAACuB,SAAS,EAAEd,WAAW,CAAC;MAClC,CAAC,EACD,UAAAe,KAAK;QAAA,OAAIxB,QAAQ,CAACwB,KAAK,CAAC;MAAA,EACzB;IACL;EAAC;EAAA,OAAAxC,oBAAA;AAAA,EApCuCD,WAAA,CAAA0C,yBAAuC;AAAjFC,OAAA,CAAA1C,oBAAA,GAAAA,oBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}