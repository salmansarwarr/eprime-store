{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _get = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/get.js\").default;\nvar _getPrototypeOf = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/getPrototypeOf.js\").default;\nvar _inherits = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CountOperation = void 0;\nvar command_1 = require(\"./command\");\nvar operation_1 = require(\"./operation\");\n/** @internal */\nvar CountOperation = /*#__PURE__*/function (_command_1$CommandOpe) {\n  _inherits(CountOperation, _command_1$CommandOpe);\n  var _super = _createSuper(CountOperation);\n  function CountOperation(namespace, filter, options) {\n    var _this;\n    _classCallCheck(this, CountOperation);\n    _this = _super.call(this, {\n      s: {\n        namespace: namespace\n      }\n    }, options);\n    _this.options = options;\n    _this.collectionName = namespace.collection;\n    _this.query = filter;\n    return _this;\n  }\n  _createClass(CountOperation, [{\n    key: \"executeCallback\",\n    value: function executeCallback(server, session, callback) {\n      var options = this.options;\n      var cmd = {\n        count: this.collectionName,\n        query: this.query\n      };\n      if (typeof options.limit === 'number') {\n        cmd.limit = options.limit;\n      }\n      if (typeof options.skip === 'number') {\n        cmd.skip = options.skip;\n      }\n      if (options.hint != null) {\n        cmd.hint = options.hint;\n      }\n      if (typeof options.maxTimeMS === 'number') {\n        cmd.maxTimeMS = options.maxTimeMS;\n      }\n      _get(_getPrototypeOf(CountOperation.prototype), \"executeCommand\", this).call(this, server, session, cmd, function (err, result) {\n        callback(err, result ? result.n : 0);\n      });\n    }\n  }]);\n  return CountOperation;\n}(command_1.CommandOperation);\nexports.CountOperation = CountOperation;\n(0, operation_1.defineAspects)(CountOperation, [operation_1.Aspect.READ_OPERATION, operation_1.Aspect.RETRYABLE]);","map":{"version":3,"names":["command_1","require","operation_1","CountOperation","_command_1$CommandOpe","_inherits","_super","_createSuper","namespace","filter","options","_this","_classCallCheck","call","s","collectionName","collection","query","_createClass","key","value","executeCallback","server","session","callback","cmd","count","limit","skip","hint","maxTimeMS","_get","_getPrototypeOf","prototype","err","result","n","CommandOperation","exports","defineAspects","Aspect","READ_OPERATION","RETRYABLE"],"sources":["/home/salman/Documents/GitHub/FakeShop/node_modules/mongodb/src/operations/count.ts"],"sourcesContent":["import type { Document } from '../bson';\nimport type { Collection } from '../collection';\nimport type { Server } from '../sdam/server';\nimport type { ClientSession } from '../sessions';\nimport type { Callback, MongoDBNamespace } from '../utils';\nimport { CommandOperation, type CommandOperationOptions } from './command';\nimport { Aspect, defineAspects } from './operation';\n\n/** @public */\nexport interface CountOptions extends CommandOperationOptions {\n  /** The number of documents to skip. */\n  skip?: number;\n  /** The maximum amounts to count before aborting. */\n  limit?: number;\n  /** Number of milliseconds to wait before aborting the query. */\n  maxTimeMS?: number;\n  /** An index name hint for the query. */\n  hint?: string | Document;\n}\n\n/** @internal */\nexport class CountOperation extends CommandOperation<number> {\n  override options: CountOptions;\n  collectionName?: string;\n  query: Document;\n\n  constructor(namespace: MongoDBNamespace, filter: Document, options: CountOptions) {\n    super({ s: { namespace: namespace } } as unknown as Collection, options);\n\n    this.options = options;\n    this.collectionName = namespace.collection;\n    this.query = filter;\n  }\n\n  override executeCallback(\n    server: Server,\n    session: ClientSession | undefined,\n    callback: Callback<number>\n  ): void {\n    const options = this.options;\n    const cmd: Document = {\n      count: this.collectionName,\n      query: this.query\n    };\n\n    if (typeof options.limit === 'number') {\n      cmd.limit = options.limit;\n    }\n\n    if (typeof options.skip === 'number') {\n      cmd.skip = options.skip;\n    }\n\n    if (options.hint != null) {\n      cmd.hint = options.hint;\n    }\n\n    if (typeof options.maxTimeMS === 'number') {\n      cmd.maxTimeMS = options.maxTimeMS;\n    }\n\n    super.executeCommand(server, session, cmd, (err, result) => {\n      callback(err, result ? result.n : 0);\n    });\n  }\n}\n\ndefineAspects(CountOperation, [Aspect.READ_OPERATION, Aspect.RETRYABLE]);\n"],"mappings":";;;;;;;;;;;;AAKA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AAcA;AAAA,IACaE,cAAe,0BAAAC,qBAAA;EAAAC,SAAA,CAAAF,cAAA,EAAAC,qBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,cAAA;EAK1B,SAAAA,eAAYK,SAA2B,EAAEC,MAAgB,EAAEC,OAAqB;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAT,cAAA;IAC9EQ,KAAA,GAAAL,MAAA,CAAAO,IAAA,OAAM;MAAEC,CAAC,EAAE;QAAEN,SAAS,EAAEA;MAAS;IAAE,CAA2B,EAAEE,OAAO;IAEvEC,KAAA,CAAKD,OAAO,GAAGA,OAAO;IACtBC,KAAA,CAAKI,cAAc,GAAGP,SAAS,CAACQ,UAAU;IAC1CL,KAAA,CAAKM,KAAK,GAAGR,MAAM;IAAC,OAAAE,KAAA;EACtB;EAACO,YAAA,CAAAf,cAAA;IAAAgB,GAAA;IAAAC,KAAA,EAEQ,SAAAC,gBACPC,MAAc,EACdC,OAAkC,EAClCC,QAA0B;MAE1B,IAAMd,OAAO,GAAG,IAAI,CAACA,OAAO;MAC5B,IAAMe,GAAG,GAAa;QACpBC,KAAK,EAAE,IAAI,CAACX,cAAc;QAC1BE,KAAK,EAAE,IAAI,CAACA;OACb;MAED,IAAI,OAAOP,OAAO,CAACiB,KAAK,KAAK,QAAQ,EAAE;QACrCF,GAAG,CAACE,KAAK,GAAGjB,OAAO,CAACiB,KAAK;;MAG3B,IAAI,OAAOjB,OAAO,CAACkB,IAAI,KAAK,QAAQ,EAAE;QACpCH,GAAG,CAACG,IAAI,GAAGlB,OAAO,CAACkB,IAAI;;MAGzB,IAAIlB,OAAO,CAACmB,IAAI,IAAI,IAAI,EAAE;QACxBJ,GAAG,CAACI,IAAI,GAAGnB,OAAO,CAACmB,IAAI;;MAGzB,IAAI,OAAOnB,OAAO,CAACoB,SAAS,KAAK,QAAQ,EAAE;QACzCL,GAAG,CAACK,SAAS,GAAGpB,OAAO,CAACoB,SAAS;;MAGnCC,IAAA,CAAAC,eAAA,CAAA7B,cAAA,CAAA8B,SAAA,2BAAApB,IAAA,OAAqBS,MAAM,EAAEC,OAAO,EAAEE,GAAG,EAAE,UAACS,GAAG,EAAEC,MAAM,EAAI;QACzDX,QAAQ,CAACU,GAAG,EAAEC,MAAM,GAAGA,MAAM,CAACC,CAAC,GAAG,CAAC,CAAC;MACtC,CAAC;IACH;EAAC;EAAA,OAAAjC,cAAA;AAAA,EA3CiCH,SAAA,CAAAqC,gBAAwB;AAA5DC,OAAA,CAAAnC,cAAA,GAAAA,cAAA;AA8CA,IAAAD,WAAA,CAAAqC,aAAa,EAACpC,cAAc,EAAE,CAACD,WAAA,CAAAsC,MAAM,CAACC,cAAc,EAAEvC,WAAA,CAAAsC,MAAM,CAACE,SAAS,CAAC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}