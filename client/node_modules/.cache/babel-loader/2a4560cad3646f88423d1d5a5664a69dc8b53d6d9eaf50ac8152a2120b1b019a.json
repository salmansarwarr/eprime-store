{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/home/salman/Documents/GitHub/FakeShop/node_modules/@babel/runtime/helpers/createClass.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compareTopologyVersion = exports.parseServerType = exports.ServerDescription = void 0;\nvar bson_1 = require(\"../bson\");\nvar error_1 = require(\"../error\");\nvar utils_1 = require(\"../utils\");\nvar common_1 = require(\"./common\");\nvar WRITABLE_SERVER_TYPES = new Set([common_1.ServerType.RSPrimary, common_1.ServerType.Standalone, common_1.ServerType.Mongos, common_1.ServerType.LoadBalancer]);\nvar DATA_BEARING_SERVER_TYPES = new Set([common_1.ServerType.RSPrimary, common_1.ServerType.RSSecondary, common_1.ServerType.Mongos, common_1.ServerType.Standalone, common_1.ServerType.LoadBalancer]);\n/**\n * The client's view of a single server, based on the most recent hello outcome.\n *\n * Internal type, not meant to be directly instantiated\n * @public\n */\nvar ServerDescription = /*#__PURE__*/function () {\n  /**\n   * Create a ServerDescription\n   * @internal\n   *\n   * @param address - The address of the server\n   * @param hello - An optional hello response for this server\n   */\n  function ServerDescription(address, hello) {\n    var _hello$hosts$map, _hello$hosts, _hello$passives$map, _hello$passives, _hello$arbiters$map, _hello$arbiters, _hello$tags, _hello$minWireVersion, _hello$maxWireVersion, _options$roundTripTim, _hello$lastWrite$last, _hello$lastWrite, _options$error, _ref, _this$error$topologyV, _this$error, _hello$setName, _hello$setVersion, _hello$electionId, _hello$logicalSession, _hello$primary, _hello$me$toLowerCase, _hello$me, _hello$$clusterTime;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, ServerDescription);\n    if (address == null || address === '') {\n      throw new error_1.MongoRuntimeError('ServerDescription must be provided with a non-empty address');\n    }\n    this.address = typeof address === 'string' ? utils_1.HostAddress.fromString(address).toString() // Use HostAddress to normalize\n    : address.toString();\n    this.type = parseServerType(hello, options);\n    this.hosts = (_hello$hosts$map = hello === null || hello === void 0 || (_hello$hosts = hello.hosts) === null || _hello$hosts === void 0 ? void 0 : _hello$hosts.map(function (host) {\n      return host.toLowerCase();\n    })) !== null && _hello$hosts$map !== void 0 ? _hello$hosts$map : [];\n    this.passives = (_hello$passives$map = hello === null || hello === void 0 || (_hello$passives = hello.passives) === null || _hello$passives === void 0 ? void 0 : _hello$passives.map(function (host) {\n      return host.toLowerCase();\n    })) !== null && _hello$passives$map !== void 0 ? _hello$passives$map : [];\n    this.arbiters = (_hello$arbiters$map = hello === null || hello === void 0 || (_hello$arbiters = hello.arbiters) === null || _hello$arbiters === void 0 ? void 0 : _hello$arbiters.map(function (host) {\n      return host.toLowerCase();\n    })) !== null && _hello$arbiters$map !== void 0 ? _hello$arbiters$map : [];\n    this.tags = (_hello$tags = hello === null || hello === void 0 ? void 0 : hello.tags) !== null && _hello$tags !== void 0 ? _hello$tags : {};\n    this.minWireVersion = (_hello$minWireVersion = hello === null || hello === void 0 ? void 0 : hello.minWireVersion) !== null && _hello$minWireVersion !== void 0 ? _hello$minWireVersion : 0;\n    this.maxWireVersion = (_hello$maxWireVersion = hello === null || hello === void 0 ? void 0 : hello.maxWireVersion) !== null && _hello$maxWireVersion !== void 0 ? _hello$maxWireVersion : 0;\n    this.roundTripTime = (_options$roundTripTim = options === null || options === void 0 ? void 0 : options.roundTripTime) !== null && _options$roundTripTim !== void 0 ? _options$roundTripTim : -1;\n    this.lastUpdateTime = (0, utils_1.now)();\n    this.lastWriteDate = (_hello$lastWrite$last = hello === null || hello === void 0 || (_hello$lastWrite = hello.lastWrite) === null || _hello$lastWrite === void 0 ? void 0 : _hello$lastWrite.lastWriteDate) !== null && _hello$lastWrite$last !== void 0 ? _hello$lastWrite$last : 0;\n    this.error = (_options$error = options.error) !== null && _options$error !== void 0 ? _options$error : null;\n    // TODO(NODE-2674): Preserve int64 sent from MongoDB\n    this.topologyVersion = (_ref = (_this$error$topologyV = (_this$error = this.error) === null || _this$error === void 0 ? void 0 : _this$error.topologyVersion) !== null && _this$error$topologyV !== void 0 ? _this$error$topologyV : hello === null || hello === void 0 ? void 0 : hello.topologyVersion) !== null && _ref !== void 0 ? _ref : null;\n    this.setName = (_hello$setName = hello === null || hello === void 0 ? void 0 : hello.setName) !== null && _hello$setName !== void 0 ? _hello$setName : null;\n    this.setVersion = (_hello$setVersion = hello === null || hello === void 0 ? void 0 : hello.setVersion) !== null && _hello$setVersion !== void 0 ? _hello$setVersion : null;\n    this.electionId = (_hello$electionId = hello === null || hello === void 0 ? void 0 : hello.electionId) !== null && _hello$electionId !== void 0 ? _hello$electionId : null;\n    this.logicalSessionTimeoutMinutes = (_hello$logicalSession = hello === null || hello === void 0 ? void 0 : hello.logicalSessionTimeoutMinutes) !== null && _hello$logicalSession !== void 0 ? _hello$logicalSession : null;\n    this.primary = (_hello$primary = hello === null || hello === void 0 ? void 0 : hello.primary) !== null && _hello$primary !== void 0 ? _hello$primary : null;\n    this.me = (_hello$me$toLowerCase = hello === null || hello === void 0 || (_hello$me = hello.me) === null || _hello$me === void 0 ? void 0 : _hello$me.toLowerCase()) !== null && _hello$me$toLowerCase !== void 0 ? _hello$me$toLowerCase : null;\n    this.$clusterTime = (_hello$$clusterTime = hello === null || hello === void 0 ? void 0 : hello.$clusterTime) !== null && _hello$$clusterTime !== void 0 ? _hello$$clusterTime : null;\n  }\n  _createClass(ServerDescription, [{\n    key: \"hostAddress\",\n    get: function get() {\n      return utils_1.HostAddress.fromString(this.address);\n    }\n  }, {\n    key: \"allHosts\",\n    get: function get() {\n      return this.hosts.concat(this.arbiters).concat(this.passives);\n    }\n    /** Is this server available for reads*/\n  }, {\n    key: \"isReadable\",\n    get: function get() {\n      return this.type === common_1.ServerType.RSSecondary || this.isWritable;\n    }\n    /** Is this server data bearing */\n  }, {\n    key: \"isDataBearing\",\n    get: function get() {\n      return DATA_BEARING_SERVER_TYPES.has(this.type);\n    }\n    /** Is this server available for writes */\n  }, {\n    key: \"isWritable\",\n    get: function get() {\n      return WRITABLE_SERVER_TYPES.has(this.type);\n    }\n  }, {\n    key: \"host\",\n    get: function get() {\n      var chopLength = \":\".concat(this.port).length;\n      return this.address.slice(0, -chopLength);\n    }\n  }, {\n    key: \"port\",\n    get: function get() {\n      var port = this.address.split(':').pop();\n      return port ? Number.parseInt(port, 10) : 27017;\n    }\n    /**\n     * Determines if another `ServerDescription` is equal to this one per the rules defined\n     * in the {@link https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#serverdescription|SDAM spec}\n     */\n  }, {\n    key: \"equals\",\n    value: function equals(other) {\n      // Despite using the comparator that would determine a nullish topologyVersion as greater than\n      // for equality we should only always perform direct equality comparison\n      var topologyVersionsEqual = this.topologyVersion === (other === null || other === void 0 ? void 0 : other.topologyVersion) || compareTopologyVersion(this.topologyVersion, other === null || other === void 0 ? void 0 : other.topologyVersion) === 0;\n      var electionIdsEqual = this.electionId != null && (other === null || other === void 0 ? void 0 : other.electionId) != null ? (0, utils_1.compareObjectId)(this.electionId, other.electionId) === 0 : this.electionId === (other === null || other === void 0 ? void 0 : other.electionId);\n      return other != null && (0, utils_1.errorStrictEqual)(this.error, other.error) && this.type === other.type && this.minWireVersion === other.minWireVersion && (0, utils_1.arrayStrictEqual)(this.hosts, other.hosts) && tagsStrictEqual(this.tags, other.tags) && this.setName === other.setName && this.setVersion === other.setVersion && electionIdsEqual && this.primary === other.primary && this.logicalSessionTimeoutMinutes === other.logicalSessionTimeoutMinutes && topologyVersionsEqual;\n    }\n  }]);\n  return ServerDescription;\n}();\nexports.ServerDescription = ServerDescription;\n// Parses a `hello` message and determines the server type\nfunction parseServerType(hello, options) {\n  if (options !== null && options !== void 0 && options.loadBalanced) {\n    return common_1.ServerType.LoadBalancer;\n  }\n  if (!hello || !hello.ok) {\n    return common_1.ServerType.Unknown;\n  }\n  if (hello.isreplicaset) {\n    return common_1.ServerType.RSGhost;\n  }\n  if (hello.msg && hello.msg === 'isdbgrid') {\n    return common_1.ServerType.Mongos;\n  }\n  if (hello.setName) {\n    if (hello.hidden) {\n      return common_1.ServerType.RSOther;\n    } else if (hello.isWritablePrimary) {\n      return common_1.ServerType.RSPrimary;\n    } else if (hello.secondary) {\n      return common_1.ServerType.RSSecondary;\n    } else if (hello.arbiterOnly) {\n      return common_1.ServerType.RSArbiter;\n    } else {\n      return common_1.ServerType.RSOther;\n    }\n  }\n  return common_1.ServerType.Standalone;\n}\nexports.parseServerType = parseServerType;\nfunction tagsStrictEqual(tags, tags2) {\n  var tagsKeys = Object.keys(tags);\n  var tags2Keys = Object.keys(tags2);\n  return tagsKeys.length === tags2Keys.length && tagsKeys.every(function (key) {\n    return tags2[key] === tags[key];\n  });\n}\n/**\n * Compares two topology versions.\n *\n * 1. If the response topologyVersion is unset or the ServerDescription's\n *    topologyVersion is null, the client MUST assume the response is more recent.\n * 1. If the response's topologyVersion.processId is not equal to the\n *    ServerDescription's, the client MUST assume the response is more recent.\n * 1. If the response's topologyVersion.processId is equal to the\n *    ServerDescription's, the client MUST use the counter field to determine\n *    which topologyVersion is more recent.\n *\n * ```ts\n * currentTv <   newTv === -1\n * currentTv === newTv === 0\n * currentTv >   newTv === 1\n * ```\n */\nfunction compareTopologyVersion(currentTv, newTv) {\n  if (currentTv == null || newTv == null) {\n    return -1;\n  }\n  if (!currentTv.processId.equals(newTv.processId)) {\n    return -1;\n  }\n  // TODO(NODE-2674): Preserve int64 sent from MongoDB\n  var currentCounter = bson_1.Long.isLong(currentTv.counter) ? currentTv.counter : bson_1.Long.fromNumber(currentTv.counter);\n  var newCounter = bson_1.Long.isLong(newTv.counter) ? newTv.counter : bson_1.Long.fromNumber(newTv.counter);\n  return currentCounter.compare(newCounter);\n}\nexports.compareTopologyVersion = compareTopologyVersion;","map":{"version":3,"names":["bson_1","require","error_1","utils_1","common_1","WRITABLE_SERVER_TYPES","Set","ServerType","RSPrimary","Standalone","Mongos","LoadBalancer","DATA_BEARING_SERVER_TYPES","RSSecondary","ServerDescription","address","hello","_hello$hosts$map","_hello$hosts","_hello$passives$map","_hello$passives","_hello$arbiters$map","_hello$arbiters","_hello$tags","_hello$minWireVersion","_hello$maxWireVersion","_options$roundTripTim","_hello$lastWrite$last","_hello$lastWrite","_options$error","_ref","_this$error$topologyV","_this$error","_hello$setName","_hello$setVersion","_hello$electionId","_hello$logicalSession","_hello$primary","_hello$me$toLowerCase","_hello$me","_hello$$clusterTime","options","arguments","length","undefined","_classCallCheck","MongoRuntimeError","HostAddress","fromString","toString","type","parseServerType","hosts","map","host","toLowerCase","passives","arbiters","tags","minWireVersion","maxWireVersion","roundTripTime","lastUpdateTime","now","lastWriteDate","lastWrite","error","topologyVersion","setName","setVersion","electionId","logicalSessionTimeoutMinutes","primary","me","$clusterTime","_createClass","key","get","concat","isWritable","has","chopLength","port","slice","split","pop","Number","parseInt","value","equals","other","topologyVersionsEqual","compareTopologyVersion","electionIdsEqual","compareObjectId","errorStrictEqual","arrayStrictEqual","tagsStrictEqual","exports","loadBalanced","ok","Unknown","isreplicaset","RSGhost","msg","hidden","RSOther","isWritablePrimary","secondary","arbiterOnly","RSArbiter","tags2","tagsKeys","Object","keys","tags2Keys","every","currentTv","newTv","processId","currentCounter","Long","isLong","counter","fromNumber","newCounter","compare"],"sources":["/home/salman/Documents/GitHub/FakeShop/node_modules/mongodb/src/sdam/server_description.ts"],"sourcesContent":["import { type Document, Long, type ObjectId } from '../bson';\nimport { type MongoError, MongoRuntimeError, type MongoServerError } from '../error';\nimport { arrayStrictEqual, compareObjectId, errorStrictEqual, HostAddress, now } from '../utils';\nimport type { ClusterTime } from './common';\nimport { ServerType } from './common';\n\nconst WRITABLE_SERVER_TYPES = new Set<ServerType>([\n  ServerType.RSPrimary,\n  ServerType.Standalone,\n  ServerType.Mongos,\n  ServerType.LoadBalancer\n]);\n\nconst DATA_BEARING_SERVER_TYPES = new Set<ServerType>([\n  ServerType.RSPrimary,\n  ServerType.RSSecondary,\n  ServerType.Mongos,\n  ServerType.Standalone,\n  ServerType.LoadBalancer\n]);\n\n/** @public */\nexport interface TopologyVersion {\n  processId: ObjectId;\n  counter: Long;\n}\n\n/** @public */\nexport type TagSet = { [key: string]: string };\n\n/** @internal */\nexport interface ServerDescriptionOptions {\n  /** An Error used for better reporting debugging */\n  error?: MongoServerError;\n\n  /** The round trip time to ping this server (in ms) */\n  roundTripTime?: number;\n\n  /** If the client is in load balancing mode. */\n  loadBalanced?: boolean;\n}\n\n/**\n * The client's view of a single server, based on the most recent hello outcome.\n *\n * Internal type, not meant to be directly instantiated\n * @public\n */\nexport class ServerDescription {\n  address: string;\n  type: ServerType;\n  hosts: string[];\n  passives: string[];\n  arbiters: string[];\n  tags: TagSet;\n  error: MongoError | null;\n  topologyVersion: TopologyVersion | null;\n  minWireVersion: number;\n  maxWireVersion: number;\n  roundTripTime: number;\n  lastUpdateTime: number;\n  lastWriteDate: number;\n  me: string | null;\n  primary: string | null;\n  setName: string | null;\n  setVersion: number | null;\n  electionId: ObjectId | null;\n  logicalSessionTimeoutMinutes: number | null;\n\n  // NOTE: does this belong here? It seems we should gossip the cluster time at the CMAP level\n  $clusterTime?: ClusterTime;\n\n  /**\n   * Create a ServerDescription\n   * @internal\n   *\n   * @param address - The address of the server\n   * @param hello - An optional hello response for this server\n   */\n  constructor(\n    address: HostAddress | string,\n    hello?: Document,\n    options: ServerDescriptionOptions = {}\n  ) {\n    if (address == null || address === '') {\n      throw new MongoRuntimeError('ServerDescription must be provided with a non-empty address');\n    }\n\n    this.address =\n      typeof address === 'string'\n        ? HostAddress.fromString(address).toString() // Use HostAddress to normalize\n        : address.toString();\n    this.type = parseServerType(hello, options);\n    this.hosts = hello?.hosts?.map((host: string) => host.toLowerCase()) ?? [];\n    this.passives = hello?.passives?.map((host: string) => host.toLowerCase()) ?? [];\n    this.arbiters = hello?.arbiters?.map((host: string) => host.toLowerCase()) ?? [];\n    this.tags = hello?.tags ?? {};\n    this.minWireVersion = hello?.minWireVersion ?? 0;\n    this.maxWireVersion = hello?.maxWireVersion ?? 0;\n    this.roundTripTime = options?.roundTripTime ?? -1;\n    this.lastUpdateTime = now();\n    this.lastWriteDate = hello?.lastWrite?.lastWriteDate ?? 0;\n    this.error = options.error ?? null;\n    // TODO(NODE-2674): Preserve int64 sent from MongoDB\n    this.topologyVersion = this.error?.topologyVersion ?? hello?.topologyVersion ?? null;\n    this.setName = hello?.setName ?? null;\n    this.setVersion = hello?.setVersion ?? null;\n    this.electionId = hello?.electionId ?? null;\n    this.logicalSessionTimeoutMinutes = hello?.logicalSessionTimeoutMinutes ?? null;\n    this.primary = hello?.primary ?? null;\n    this.me = hello?.me?.toLowerCase() ?? null;\n    this.$clusterTime = hello?.$clusterTime ?? null;\n  }\n\n  get hostAddress(): HostAddress {\n    return HostAddress.fromString(this.address);\n  }\n\n  get allHosts(): string[] {\n    return this.hosts.concat(this.arbiters).concat(this.passives);\n  }\n\n  /** Is this server available for reads*/\n  get isReadable(): boolean {\n    return this.type === ServerType.RSSecondary || this.isWritable;\n  }\n\n  /** Is this server data bearing */\n  get isDataBearing(): boolean {\n    return DATA_BEARING_SERVER_TYPES.has(this.type);\n  }\n\n  /** Is this server available for writes */\n  get isWritable(): boolean {\n    return WRITABLE_SERVER_TYPES.has(this.type);\n  }\n\n  get host(): string {\n    const chopLength = `:${this.port}`.length;\n    return this.address.slice(0, -chopLength);\n  }\n\n  get port(): number {\n    const port = this.address.split(':').pop();\n    return port ? Number.parseInt(port, 10) : 27017;\n  }\n\n  /**\n   * Determines if another `ServerDescription` is equal to this one per the rules defined\n   * in the {@link https://github.com/mongodb/specifications/blob/master/source/server-discovery-and-monitoring/server-discovery-and-monitoring.rst#serverdescription|SDAM spec}\n   */\n  equals(other?: ServerDescription | null): boolean {\n    // Despite using the comparator that would determine a nullish topologyVersion as greater than\n    // for equality we should only always perform direct equality comparison\n    const topologyVersionsEqual =\n      this.topologyVersion === other?.topologyVersion ||\n      compareTopologyVersion(this.topologyVersion, other?.topologyVersion) === 0;\n\n    const electionIdsEqual =\n      this.electionId != null && other?.electionId != null\n        ? compareObjectId(this.electionId, other.electionId) === 0\n        : this.electionId === other?.electionId;\n\n    return (\n      other != null &&\n      errorStrictEqual(this.error, other.error) &&\n      this.type === other.type &&\n      this.minWireVersion === other.minWireVersion &&\n      arrayStrictEqual(this.hosts, other.hosts) &&\n      tagsStrictEqual(this.tags, other.tags) &&\n      this.setName === other.setName &&\n      this.setVersion === other.setVersion &&\n      electionIdsEqual &&\n      this.primary === other.primary &&\n      this.logicalSessionTimeoutMinutes === other.logicalSessionTimeoutMinutes &&\n      topologyVersionsEqual\n    );\n  }\n}\n\n// Parses a `hello` message and determines the server type\nexport function parseServerType(hello?: Document, options?: ServerDescriptionOptions): ServerType {\n  if (options?.loadBalanced) {\n    return ServerType.LoadBalancer;\n  }\n\n  if (!hello || !hello.ok) {\n    return ServerType.Unknown;\n  }\n\n  if (hello.isreplicaset) {\n    return ServerType.RSGhost;\n  }\n\n  if (hello.msg && hello.msg === 'isdbgrid') {\n    return ServerType.Mongos;\n  }\n\n  if (hello.setName) {\n    if (hello.hidden) {\n      return ServerType.RSOther;\n    } else if (hello.isWritablePrimary) {\n      return ServerType.RSPrimary;\n    } else if (hello.secondary) {\n      return ServerType.RSSecondary;\n    } else if (hello.arbiterOnly) {\n      return ServerType.RSArbiter;\n    } else {\n      return ServerType.RSOther;\n    }\n  }\n\n  return ServerType.Standalone;\n}\n\nfunction tagsStrictEqual(tags: TagSet, tags2: TagSet): boolean {\n  const tagsKeys = Object.keys(tags);\n  const tags2Keys = Object.keys(tags2);\n\n  return (\n    tagsKeys.length === tags2Keys.length &&\n    tagsKeys.every((key: string) => tags2[key] === tags[key])\n  );\n}\n\n/**\n * Compares two topology versions.\n *\n * 1. If the response topologyVersion is unset or the ServerDescription's\n *    topologyVersion is null, the client MUST assume the response is more recent.\n * 1. If the response's topologyVersion.processId is not equal to the\n *    ServerDescription's, the client MUST assume the response is more recent.\n * 1. If the response's topologyVersion.processId is equal to the\n *    ServerDescription's, the client MUST use the counter field to determine\n *    which topologyVersion is more recent.\n *\n * ```ts\n * currentTv <   newTv === -1\n * currentTv === newTv === 0\n * currentTv >   newTv === 1\n * ```\n */\nexport function compareTopologyVersion(\n  currentTv?: TopologyVersion | null,\n  newTv?: TopologyVersion | null\n): 0 | -1 | 1 {\n  if (currentTv == null || newTv == null) {\n    return -1;\n  }\n\n  if (!currentTv.processId.equals(newTv.processId)) {\n    return -1;\n  }\n\n  // TODO(NODE-2674): Preserve int64 sent from MongoDB\n  const currentCounter = Long.isLong(currentTv.counter)\n    ? currentTv.counter\n    : Long.fromNumber(currentTv.counter);\n  const newCounter = Long.isLong(newTv.counter) ? newTv.counter : Long.fromNumber(newTv.counter);\n\n  return currentCounter.compare(newCounter);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}